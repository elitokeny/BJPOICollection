window.onload = function () {

    var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [116.397428, 39.90923],//地图中心点
        zoom: 13 //地图显示的缩放级别
    });

    var stations = ['快速公交1线', '快速公交2线', '快速公交3线', '运通101路', '运通102路', '运通103路', '运通104路', '运通105路', '运通106路', '运通107路', '运通108路', '运通109路', '运通110路', '运通111路', '运通112路', '运通113路', '运通114路', '运通115路', '运通116路', '运通117路', '运通118路', '运通119路', '运通120路', '运通201路', '运通202路', '运通205路', '昌1路', '昌11路', '昌12路', '昌13路', '昌15路', '昌16路', '昌17路', '昌18路', '昌19路', '昌20路', '昌21路', '昌22路', '昌23路', '昌25路', '昌26路', '昌27路', '昌28路', '昌29路', '昌30路', '昌31路', '昌32路', '昌33路', '昌35路', '昌36路', '昌38路', '昌39路', '昌51路', '昌52路', '昌53路', '昌55路', '昌56路', '昌57路', '昌58路', '昌59路', '昌60路', '昌61路', '昌62路', '昌63路', '昌68路', '昌69路', '兴1路', '兴14路', '兴15路', '兴16路', '兴17路', '兴18路', '兴19路', '兴20路', '兴21路', '兴22路', '兴23路', '兴24路', '兴25路', '兴26路', '兴27路', '兴28路', '兴29路', '兴30路', '兴31路', '兴32路', '兴33路', '兴34路', '兴35路', '房1路', '房2路', '房11路', '房12路', '房13路', '房14路', '房15路', '房16路', '房17路', '房18路', '房19路', '房20路', '房21路', '房22路', '房23路', '房24路', '房25路', '房26路', '房27路', '房28路', '房29路', '房30路', '房31路', '房32路', '房33路', '房34路', '房35路', '房36路', '房37路', '房38路', '房39路', '房40路', '房41路', '房42路', '房43路', '房45路', '房46路', '房47路', '开发区1路', '开发区2路', '开发区3路', '开发区4路', '空港2路', '空港3路', '密1路', '密2路', '密3路', '密5路', '密6路', '密7路', '密8路', '密9路', '密10路', '密11路', '密12路', '密13路', '密15路', '密16路', '密17路', '密18路', '密22路', '密23路', '密25路', '密26路', '密27路', '密28路', '密29路', '密30路', '密31路', '密32路', '密33路', '密35路', '密36路', '密38路', '密39路', '密50路', '密51路', '密52路', '平1路', '平2路', '平3路', '平11路', '平12路', '平13路', '平14路', '平15路', '平16路', '平17路', '平18路', '平19路', '平20路', '平21路', '平22路', '平23路', '平24路', '平25路', '平26路', '平27路', '平28路', '平29路', '平30路', '平31路', '平32路', '平33路', '平34路', '平35路', '平36路', '平37路', '平38路', '平39路', '平40路', '平41路', '平42路', '平43路', '平44路', '平45路', '平46路', '平48路', '顺1路', '顺2路', '顺11路', '顺12路', '顺13路', '顺14路', '顺15路', '顺16路', '顺17路', '顺18路', '顺19路', '顺20路', '顺21路', '顺22路', '顺23路', '顺24路', '顺25路', '顺26路', '顺27路', '顺28路', '顺29路', '顺30路', '顺31路', '顺32路', '顺33路', '顺34路', '顺35路', '顺36路', '顺37路', '顺38路', '顺39路', '顺40路', '顺41路', '顺42路', '顺43路', '顺45路', '通1路', '通2路', '通3路', '通4路', '通6路', '通7路', '通9路', '通10路', '通11路', '通12路', '通13路', '通14路', '通15路', '通16路', '通17路', '通18路', '通19路', '通20路', '通21路', '通22路', '通23路', '通24路', '通25路', '通26路', '通27路', '机场1线', '机场2线', '机场3线', '机场4线', '机场5线', '机场6线', '机场7线', '机场8线', '机场9线', '通勤快临1路', '通勤快临2路', '通勤快临3路', '专1路', '专2路', '专3路', '专4路', '专5路', '专20路', '专21路', '专22路', '专23路', '专24路', '专25路', '专27路', '专28路', '专30路', '专31路', '专37路', '专42路', '专43路', '专44路', '运通121路', '运通122路', '密1路', '平1路', '顺1路', '通1路', '兴1路', 'H1路', 'M1路', 'Y1路', '特2路', '昌2路', '密2路', '平2路', '顺2路', '通2路', 'H2路', 'M2路', 'Y2路', '特3路', '密3路', '平3路', '顺3路', '通3路', 'H3路', 'M3路', 'Y3路', '特4路', '平4路', '顺4路', '通4路', 'H4路', 'M4路', '特5路', '密5路', '平5路', 'H5路', 'M5路', 'Y5路', '特6路', '密6路', '密6支线', '延6支线', 'H6路', 'M6路', 'Y6路', '特7路', '密7路', '通7路', 'M7路', 'Y7路', '特8外环', '特8内环', '密8路', '密8支线', 'H8路', 'M8路', 'Y8路', '密9路', '通9路', 'H9路', 'M9路', 'Y9路', '特10路', '密10路', '通10路', 'H10路', 'M10路', 'Y10路', '特11路', '昌11路', '房11路', '密11路', '平11路', '顺11路', '通11路', '昌12路', '房12路', '密12路', '平12路', '顺12路', '通12路', 'H12路', 'M12路', 'Y12路', '昌13路', '房13路', '密13路', '平13路', '顺13路', '通13路', 'H13路', 'H13路', 'M13路', 'Y13路', '房14路', '平14路', '顺14路', '通14路', '兴14路', 'H14路', 'M14路', 'Y14路', '房15路', '密15路', '平15路', '顺15路', '通15路', '兴15路', 'H15路', 'M15路', 'Y15路', '昌16路', '房16路', '密16路', '平16路', '顺16路', '通16路', '兴16路', 'H16路', 'M16路', 'Y16路', '昌17路', '房17路', '平17路', '顺17路', '通17路', '兴17路', 'H17路', 'M17路', 'Y17路', '昌18路', '房18路', '密18路', '平18路', '顺18路', '通18路', '兴18路', 'H18路', 'M18路', '昌19路', '房19路', '密19路', '平19路', '顺19路', '通19路', '兴19路', 'H19路', 'M19路', '昌20路', '房20路', '密20路', '平20路', '顺20路', '通20路', '兴20路', 'H20路', 'M20路', '昌21路', '房21路', '密21路', '平21路', '顺21路', '通21路', '兴21路', 'H21路', 'M21路', '昌22路', '房22路', '密22路', '平22路', '顺22路', '通22路', '兴22路', 'H22路', '房23路', '密23路', '平23路', '顺23路', '通23路', '兴23路', 'H23路', '房24路', '密24路', '平24路', '顺24路', '通24路', '兴24路', 'H24路', '昌25路', '房25路', '密25路', '平25路', '顺25路', '通25路', '兴25路', 'H25路', '昌26路', '房26路', '房26路', '密26路', '平26路', '顺26路', '通26路', '兴26路', 'H26路', '昌27路', '房27路', '密27路', '平27路', '顺27路', '通27路', '兴27路', 'H27路', '昌28路', '房28路', '密28路', '平28路', '顺28路', '通28路', '兴28路', 'H28路', '昌29路', '密29路', '平29路', '顺29路', '通29路', '兴29路', '房30路', '密30路', '平30路', '顺30路', '通30路', '兴30路', '昌31路', '房31路', '密31路', '平31路', '顺31路', '通31路', '兴31路', '昌32路', '房32路', '密32路', '平32路', '顺32路', '通32路', '兴32路', '昌33路', '房33路', '密33路', '平33路', '顺33路', '兴33路', '房34路', '密34路', '平34路', '顺34路', '昌35路', '房35路', '密35路', '平35路', '顺35路', '兴35路', '昌36路', '房36路', '密36路', '平36路', '顺36路', '兴36路', '房37路', '密37路', '平37路', '顺37路', '房38路', '密38路', '平38路', '顺38路', '房39路', '密39路', '平39路', '顺39路', '房40路', '平40路', '顺40路', '房41路', '平41路', '顺41路', '房42路', '平42路', '顺42路', '兴42路', '房43路', '平43路', '顺43路', '平44路', '兴44路', '房45路', '平45路', '顺45路', '房46路', '平46路', '房47路', '平47路', '兴47路', '房48路', '平48路', '兴48路', '房49路', '平49路', '兴49路', '密50路', '兴50路', '昌51路', '密51路', '兴51路', '昌52路', '密52路', '昌53路', '昌55路', '昌56路', '昌57路', '昌58路', '昌59路', '昌60路', '密60路', 'H60路', '昌61路', '密61路', 'H61路', '密62路', 'H62路', '密63路', 'H63路', '密65路', '昌66路', '昌67路', '昌68路', '昌69路', '郊80路', '郊81路', '郊82路', '郊82路', '郊86路', '郊87路', '郊88路', '郊89路', '郊89路', '郊90路', '郊94路', '郊95路', '郊98路', '郊99路', '郊100路', '1路', '2路', '5路', '6路', '7路', '8路', '9路', '10路', '11路', '12路', '13路', '14路', '15路', '16路', '17路', '18路', '19路', '20路', '21路', '22路', '23路', '24路', '25路', '26路', '27路', '28路', '29路', '30路', '31路', '32路', '33路', '34路', '35路', '36路', '37区间', '37路', '38路', '39路', '40路', '41路', '42路', '43路', '44外环', '44内环', '45路', '46路', '47路', '48路', '49路', '50路', '51路', '52路', '53路', '54路', '55路', '56路', '57路', '58路', '59路', '60路', '61路', '62路', '63路', '64路', '65路', '66路', '67路', '68路', '69路', '70路', '71路', '72路', '74路', '75路', '76路', '77路', '78路', '79路', '80路', '81路', '81快', '82路', '83路', '84路', '85路', '86路', '87路', '88路', '89路', '90内环', '90外环', '99路', '101路', '102路', '103路', '104路', '105路', '106路', '107路', '108路', '109路', '110路', '111路', '112路', '113路', '114路', '115路', '116路', '117路', '118路', '119路', '120路', '121路', '122路', '123路', '124路', '125路', '126路', '130路', '131路', '132路', '300外环', '300内环', '300快外环', '300快内环', '301路', '302路', '303路', '304路', '305路', '306路', '307路', '308路', '309路', '310路', '311路', '312路', '313路', '314路', '315路', '316路', '317路', '318路', '319路', '320路', '321路', '322路', '323路', '324路', '325路', '326路', '327路', '328路', '329路', '330路', '331路', '332路', '333外环', '333内环', '334路', '335路', '336路', '337路', '338路', '339路', '340路', '341路', '342路', '343路', '344快', '345路', '346路', '347路', '348路', '349路', '350路', '351路', '352路', '353路', '354路', '355路', '356路', '356区间', '357区间', '357路', '359路', '360快', '360路', '361路', '362路', '363路', '364路', '365路', '366路', '366快', '367路', '368路', '369路', '370路', '371路', '372路', '373路', '374路', '375路', '376路', '377路', '378路', '379路', '380路', '381路', '383路', '384区间', '384路', '385路', '386路', '387路', '389路', '390路', '391路', '392路', '393路', '394路', '395路', '396路', '397路', '398路', '399外环', '399内环', '401路', '402路', '403路', '404路', '405路', '406路', '407路', '408路', '409路', '410路', '411路', '412路', '413路', '414路', '415路', '416路', '417路', '418路', '419路', '420路', '421路', '422路', '423路', '424路', '425路', '425快', '426路', '427路', '428路', '429路', '430路', '431路', '432路', '433路', '434路', '435路', '436路', '437路', '438路', '439路', '440路', '441路', '442路', '443路', '444路', '445路', '446路', '447路', '448路', '449路', '450路', '451路', '452路', '453路', '454路', '455路', '456路', '457区间', '457路', '458路', '459路', '460路', '461路', '462路', '463路', '464路', '465路', '466路', '467路', '468路', '469路', '470路', '471路', '472路', '473路', '474路', '475路', '476路', '477路', '478路', '479路', '480路', '481路', '482路', '483路', '484路', '485路', '486路', '487路', '488路', '489路', '490路', '491路', '492路', '493路', '494路', '495路', '496路', '497路', '498路', '499路', '499快', '501路', '502路', '503路', '504路', '505路', '506路', '507路', '509路', '510路', '511路', '512路', '513路', '515路', '516路', '517路', '518路', '519路', '519区间', '520路', '521路', '522路', '523路', '524路', '525路', '526路', '527路', '528路', '529路', '530路', '531路', '532路', '533路', '534路', '535路', '536路', '537路', '538路', '539路', '540路', '541路', '542路', '543路', '544路', '545路', '546路', '547路', '548路', '550路', '552路', '553路', '556路', '557路', '558路', '560路', '561路', '562路', '563路', '563区间', '564路', '566路', '567路', '568路', '570路', '595路', '596路', '597路', '598区间', '598路', '599路', '601路', '601路', '603路', '604路', '605路', '607路', '608路', '608路', '609路', '609路', '610路', '611路', '612路', '613路', '614路', '615路', '616快', '616路', '617路', '618路', '619路', '620路', '621路', '623路', '624路', '625路', '626路', '627路', '628路', '629路', '630路', '631路', '631快', '632路', '633路', '635路', '636路', '637路', '638路', '639路', '640路', '641路', '642路', '643区间', '643路', '645快', '645路', '645快', '646路', '646区间', '647路', '648路', '649路', '651快', '651路', '652路', '652区间', '653路', '654路', '656路', '657路', '658路', '659路', '660路', '661路', '662路', '663路', '664路', '665路', '666路', '667路', '668路', '668快', '669路', '669快', '670路', '670路', '671路', '672路', '673路', '674路', '675路', '676路', '677区间', '677路', '678路', '679路', '680路', '681路', '682路', '683路', '684路', '685路', '686路', '687路', '688路', '689路', '690路', '691路', '692路', '693路', '694路', '695路', '696路', '697路', '698路', '699路', '701路', '707路', '714路', '715路', '717路', '718路', '723路', '728路', '728快', '729路', '731路', '736路', '740内环', '740外环', '741路', '746路', '750路', '751路', '753路', '758路', '801路', '802路', '803路', '804路', '806路', '806路', '807路', '808路', '809路', '814路', '820路', '821路', '823路', '825路', '826路', '827路', '829路', '830路', '831路', '831区间', '832路', '833路', '834路', '835路', '836路', '837路', '837区间', '839路', '840路', '841路', '842路', '843路', '844路', '844区间', '845路', '846路', '849路', '850快', '850路', '851路', '852路', '860路', '861内环', '861外环', '862内环', '862外环', '865路', '866路', '867路', '870路', '871路', '872路', '873路', '874路', '875路', '876路', '877路', '881路', '882路', '883路', '884路', '885路', '886路', '887路', '888路', '889路', '890路', '891路', '892路', '901路', '901路', '909路', '913路', '914路', '915路', '916路', '916快', '917路', '917路张坊区间', '918路', '918区间', '919区间', '919路', '920路', '921路', '923路', '924路', '925路', '925区间', '926路', '927区间', '928路', '929路', '930路', '931路', '933路', '934路', '935快', '935路', '936路', '937路', '938快', '938路', '939路', '940路', '941路', '941快', '942快', '942路', '943快', '943路', '944路', '945路', '946路', '947路', '948路', '949路', '950路', '951路', '952路', '953路', '954路', '955路', '957路', '958路', '959路', '960路', '961路', '962路', '963路', '966路', '967路', '968路', '969路', '970路', '971路', '972路', '973路', '974路', '975路', '976路', '977路', '978路', '978快', '980快', '980路', '981路', '982路', '983路', '984路', '985路', '986路', '987路', '988路', '989路', '990路', '991路', '992路', '993路', '996路', '997路', '998路'];

    $('#getBusinfo').click(function () {
        for (var i = 0; i < stations.length; i++) {
            lineSearch(stations[i]);
        }
    });


    /*公交线路查询*/
    function lineSearch(name) {
        var linesearch = new AMap.LineSearch({
            pageIndex: 1,
            city: '北京',
            pageSize: 1,
            extensions: 'all'
        });

        linesearch.search(name, function (status, result) {
            if (status === 'complete' && result.info === 'OK') {
                result.lineInfo.forEach(function (cur) {
                    sendBus(name, cur);
                })
            } else if(status === "no_data"){
                console.log(name + "无数据");
            } else {
                console.log("error");
            }

        })
    }

    function sendBus(name, result) {
        $.ajax({
            type: "POST",
            url: "/saveBus",
            async: false,
            data: JSON.stringify({'name': name, 'result': result}),
            contentType: "application/json",
            dataType: "json",
            complete: function (msg) {
                if (msg.status === 404) {
                }
            }
        })
    }


}